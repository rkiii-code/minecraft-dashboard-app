# UI Screens (Shimaenaga Theme)

## テーマ / 配色・トーン

- 背景: 白〜淡いグレーに紙質風パターンを薄く敷く
- アクセント: 空色 `#b7e1ff`、枝色 `#8b6b4a`。強調は空色の塗り/アウトライン
- 角丸大きめ (14–22px)、影はごく控えめのドロップシャドウ
- フォント: 「Noto Sans JP」など癖のないサンセリフ。数字も同系
- アセット: しまえながイラストをヒーロー周辺に小さく。`src/assets/shimaenaga.png` があれば使用、無ければ淡いシルエット
- デフォルトアバター: `src/assets/default.jpg` (ドット/ブロック調しまえなが)。未設定時に表示・プレビューでも適用

## 認証機能

### 認証状態管理

- `AuthContext` でグローバルに認証状態を管理
- ログイン情報は `localStorage` に保存（トークン + ユーザー情報）
- ページリロード時も認証状態を維持

### モックログインアカウント

動作確認用のテストアカウント（`VITE_USE_MOCK=true` 時）:

| ユーザー名 | パスワード | ロール | 説明           |
| ---------- | ---------- | ------ | -------------- |
| `admin`    | `admin123` | admin  | 管理者権限     |
| `user`     | `user123`  | user   | 一般ユーザー   |
| `sun5un`   | `password` | admin  | テスト管理者   |
| `umi_bird` | `password` | user   | テストユーザー |

### ProtectedRoute

- 未認証ユーザーは `/login` にリダイレクト
- ロール制御: `requiredRole="admin"` で管理者のみアクセス可能なルートを定義
- 権限不足時は「アクセス権限がありません」メッセージを表示

## 画面一覧

### /login

- 左: ロゴとコピー「軽量ダッシュボード」、しまえながイラスト
- 右: ログインフォーム (ユーザー名/パスワード)。エラーはカード上部に小さく表示
- ボタン: 空色グラデ + ほんのり影
- 認証済みの場合: 自動的にダッシュボードへリダイレクト
- ログイン後: 元のページ（リダイレクト元）または `/dashboard` に遷移

### /dashboard

- ヒーロー: しまえながイラスト + 「サーバーのようす」コピー
- ステータスカード: オンライン/オフライン、MOTD、バージョン、最終チェック時刻
- プレイヤー一覧: オンライン状態バッジ。アバターは `default.jpg` フォールバック
- メトリクスランキング: 有効な objective 上位をカードで表示。`play_time` カードは詳細グラフ `/metrics/playtime` へのリンク
- レイアウト: 2 カラム（ステータス/ランキング と プレイヤー一覧）、ブレークポイントで縦積み

### /players/:id

- ヘッダー: プレイヤー名・UUID・オンラインバッジ
- スコア: メトリクス別カード。最新値 + 簡易スパークバー
- プロフィール: 初回/最終ログイン
- プレイ時間: 日次グラフ (play_time 差分)

### /admin/metrics

- 一覧テーブル: objective 名、表示名、単位、状態、最終更新
- 操作: 追加（モック）、有効/無効の切替
- バリデーション: objective 名は英小文字+アンダースコア想定

### /profile（自分用）

- カバーコピー: 「表示名とひとことを更新」
- フォーム: 表示名 / ひとこと（140 文字）/ アバター URL。`default.jpg` を初期表示し、未入力時はそのまま適用
- プレビュー: ゲーム風の枠と背景。ロール表示あり
- プレイ時間: 14 日分のスパークライン
- ナビ: 「自分のプレイヤーダッシュボードへ」ボタンで `/players/:id` に遷移し詳細を表示

### /users/:id（他ユーザー公開プロフィール）

- 表示名、ユーザー名、ひとこと、アバター（未設定なら `default.jpg`）
- ロールは非表示
- 余白を広めに取り、しまえながのワンポイントを薄く背景に配置

### /metrics/playtime

- 全プレイヤーの日次プレイ時間を 1 枚のマルチラインチャートで表示（14 / 30 日切替）
- 凡例でプレイヤー色と最新値（分）を表示
- ダッシュボードの play_time カードから遷移できるリンクを配置

### /metrics/:id/history

- 任意のメトリクスについて全プレイヤーの日次推移を表示（30 / 90 / 180 / 360 日切替）
- 凡例でプレイヤー色と最新値を表示、単位はメトリクスの unit を使用
- ダッシュボードの各メトリクスカードから遷移

### /metrics

- objective/表示名/説明/単位をカード表示し、クリックで履歴へ遷移
- 有効/無効ステータスをバッジ表示

## 共通 UI 要素

- ナビゲーション: 上部バーにロゴ + メニュー（Dashboard / Players / Metrics / Admin / Profile）
  - admin ロールのみ「管理」メニューを表示
  - 右端にユーザードロップダウン（プロフィール / ログアウト）
- カード: 余白広め、角丸大きめ、背景は白/淡グレー。セクションに枝色ラインでもアクセント可
- バッジ: オンライン=空色、オフライン=グレー
- チャート: シンプルなバー/ライン。色は空色系で統一

## レスポンシブ / モバイル

- 1 カラムに畳み、ナビはハンバーガー化
- テーブルはカード化または横スクロール。ランキングはスクロール可能リスト

## 状態とフィードバック

- ローディング: スケルトンまたは淡いパルス
- エラー: カード上部に枝色ボーダーのアラート。再試行ボタン
- 空状態: しまえながの軽いイラスト＋「データがまだありません」など短いメッセージ

## アクセシビリティ

- 色コントラストは WCAG AA 以上を目標
- フォーカスリングを明示 (空色アウトライン)
